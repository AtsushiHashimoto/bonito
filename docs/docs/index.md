# Welcome to Bonito

bonitoは機械学習系研究者・学生を想定したDockerのwrapperです．本来のDockerはWebサービスを最小構成でモジュール化した仮想マシンの連携によって構築することで，システムのメンテナンス性を向上させることを目的として開発されました．このため，Dockerはモジュール間の連携を始めとして非常に多くの機能を有しています．
近年では，[k8s](https://kubernetes.io/ja/docs/concepts/overview/what-is-kubernetes/)などに代表されるように，そのフレームワークが計算用サーバ上のGPUの共有などの目的でも用いられるようになってきています．
このような用途では，必要とされる機能は限定的となります．また，そもそも機械学習エンジニアにとって，Webサービス構築のためのツールであるDockerの知識習得が必要である現状は必ずしも最適ではないというのが，bonitoの基本的な思想です．

このような背景・思想に基づいて，bonitoは下記の機能を提供します．

1. 機械学習エンジニア・学生にroot権限をもった箱庭的な仮想PCを配布する（他の人に迷惑をかけない，自由な環境の配布）
2. 最低限のオプションのみでDockerを使った開発を可能とする（初期教育コストの削減）
3. 組織・グループ単位でのdefault環境の構築・配布

特にk8sとの違いは，クラウド環境での利用を想定せず，研究室内のオンプレサーバなどでも簡単に使える，という点にあります．
なお，他にも[singularity](https://www.ecomottblog.com/?p=3903)という選択肢がありますのでbonitoを使う前に，これらのツールも検討すると良いかもしれません．

## Hello bonito!

下記コマンドのみで仮想PCにアクセスできます．  

​     ```% bonito run```

# FAQ

1. `k8s`と何が違うの?  
   -> 研究室など，実験に特化していて，その後のクラウドでのローンチなどが不要なユーザに，最小のセットアップでの仮想環境配布を実現します．k8sはクラウド上では簡単に構築可能ですが，オンプレのサーバではまず，クラウドサービスを構築しないとならず，導入が非常に難しいです．bonitoはnfsさえあれば設定ファイルの編集のみで簡単に導入が可能です．
2. singularityと何が違うの?  
   -> bonitoはdockerベースなので，基本的にdockerでできることは何でもできます．また，dockerのオプションを使えるため，web上のdocker用のdocumentは，そのままbonitoにも役立ちます．nvidia-docker2との連携やDockerfileとセットでのコードの配布など，dockerユーザと直接つながることができます．
3. 好きなエディタを使ってプログラミングできる?  
   -> サーバ上にnfsがあれば，ローカルのPCでコンテナのホームディレクトリをマウントすることで，好きなエディタを使ったプログラムの編集が可能です．また，tensorboardによるモニタリングなども，logディレクトリをローカルPCで指定することで可能となります．
4. Jupyterは使える??  
   -> Container作成時にポートを指定することで，Jupyterも利用可能です．   
   例) docker runの実行時にオプションを渡す(-o)ことで，ホストの18888番ポートをコンテナの8888ポートに接続する例  
   ```% bonito run -o "-p 18888:8888"```   
   なお，下記の設定ファイルに設定を書けば，上記は省略可能です．  
   ```% vim ~/.bonito/bonito.conf```  
   ```BONITO_OPTION_AT_RUN4DEFAULT="-p 18888:8888"```
5. Dockerfileはどこに？  
   bonitoで作成されたイメージに対応するdockerファイルは各ユーザのホスト上のホームディレクトリに，`~/.bonito/default.Dockerfile`の名前で作成されます．